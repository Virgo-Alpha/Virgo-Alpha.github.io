<!doctype html>
<html lang="en">
  <head>
    {% include head.html %}
    <link rel="stylesheet" href="{{ '/assets/css/bensonbot.css' | relative_url }}">
  </head>
  <body>
    <div id="tsparticles"></div>

    <!-- Independent Social Sidebar -->
    <aside class="social-sidebar">
      <a href="https://www.linkedin.com/in/benson-mugure" target="_blank" aria-label="LinkedIn">
        <i class="fa-brands fa-linkedin"></i>
      </a>
      <a href="https://dev.to/virgoalpha" target="_blank" aria-label="Dev.to">
        <i class="fa-brands fa-dev"></i>
      </a>
      <a href="https://github.com/Virgo-Alpha" target="_blank" aria-label="GitHub">
        <i class="fa-brands fa-github"></i>
      </a>
      <a href="https://medium.com/@b.mugure" target="_blank" aria-label="Medium">
        <i class="fa-brands fa-medium"></i>
      </a>
      <a href="https://www.omprakash.org/citizen/benson-mugure" target="_blank" aria-label="Omprakash">
        <img src="{{ '/assets/images/omprakash.jpeg' | relative_url }}" alt="Omprakash" class="omprakash-icon">
      </a>
    </aside>

    <header class="site-header">
      <div class="wrap">
        <!-- <a class="brand" href="#about">MS</a> -->
        <nav class="nav">
          <a href="{{ '/' | relative_url }}">About</a>
          <a href="{{ '/projects/' | relative_url }}">Projects</a>
          <a href="{{ '/certification/' | relative_url }}">Certification</a>
          <a href="{{ '/articles/' | relative_url }}">Articles</a>
          <a href="{{ '/resume/' | relative_url }}">My Resume</a>
          <a href="{{ '/contact/' | relative_url }}">Contact me</a>
        </nav>
      </div>
    </header>
    <main class="content">
      {{ content }}
    </main>
    <footer class="site-footer">
      <p>© {{ site.time | date: '%Y' }} {{ site.author }}</p>
    </footer>

    <!-- AOS Animation JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <!-- tsParticles -->
    <script src="https://cdn.jsdelivr.net/npm/tsparticles@2.11.1/tsparticles.bundle.min.js"></script>

    <!-- Bensonbot -->
    <script type="module" src="{{ '/assets/js/bensonbot.js' | relative_url }}"></script>

    <script>
      
      // Initialize AOS
      AOS.init({
        duration: 800,
        easing: 'slide',
        once: true,
        mirror: false
      });

      // Carousel Helper Script
      (function () {
        function init(btn) {
          var targetSel = btn.getAttribute('data-target');
          var track = document.querySelector(targetSel);
          if (!track) return;
          var step = Math.max(300, Math.floor(track.clientWidth * 0.9));

          btn.addEventListener('click', function () {
            track.scrollBy({ left: btn.classList.contains('left') ? -step : step, behavior: 'smooth' });
          });

          function update() {
            var max = track.scrollWidth - track.clientWidth - 1;
            var x = track.scrollLeft;
            var leftBtn = track.parentElement.querySelector('.scroll-btn.left');
            var rightBtn = track.parentElement.querySelector('.scroll-btn.right');
            if (leftBtn) leftBtn.disabled = x <= 0;
            if (rightBtn) rightBtn.disabled = x >= max;
          }
          track.addEventListener('scroll', update, { passive: true });
          window.addEventListener('resize', update);
          update();
        }
        document.querySelectorAll('.scroll-btn').forEach(init);
      })();

      // Particle Configurations
      const starsConfig = {
        fpsLimit: 60,
        interactivity: {
          events: {
            onClick: { enable: true, mode: "push" },
            onHover: { enable: true, mode: "repulse" },
            resize: true
          },
          modes: {
            push: { quantity: 4 },
            repulse: { distance: 200, duration: 0.4 }
          }
        },
        particles: {
          color: { value: "#ffffff" },
          links: {
            color: "#ffffff",
            distance: 150,
            enable: true,
            opacity: 0.1,
            width: 1
          },
          collisions: { enable: true },
          move: {
            direction: "none",
            enable: true,
            outModes: { default: "bounce" },
            random: false,
            speed: 1,
            straight: false
          },
          number: {
            density: { enable: true, area: 800 },
            value: 40
          },
          opacity: { value: 0.1 },
          shape: { type: "circle" },
          size: {
            value: { min: 1, max: 3 }
          }
        },
        detectRetina: true
      };


      const tsparticlesDiv = document.getElementById("tsparticles");

      async function loadParticles() {
        await tsParticles.load("tsparticles", starsConfig);
      }
      
      loadParticles();

      // Smooth scroll
      document.querySelectorAll('a[href^="#"]').forEach(a => {
        a.addEventListener('click', e => {
          const href = a.getAttribute('href');
          if (href.length > 1) {
            e.preventDefault();
            document.querySelector(href).scrollIntoView({ behavior: 'smooth' });
          }
        });
      });
      // Preview swap on hover if data-preview exists
      document.addEventListener('mouseover', function(e){
        const img = e.target.closest('img[data-preview]');
        if(!img) return;
        img.dataset.still = img.dataset.still || img.src;
        img.src = img.getAttribute('data-preview');
      });
      document.addEventListener('mouseout', function(e){
        const img = e.target.closest('img[data-preview]');
        if(!img || !img.dataset.still) return;
        img.src = img.dataset.still;
      });
      // Simple lightbox
      const lb = document.createElement('div');
      lb.className = 'lightbox hidden';
      lb.innerHTML = '<div class="lb-backdrop"></div><img class="lb-img" alt=""><button class="lb-close" aria-label="Close">×</button>';
      document.body.appendChild(lb);
      const lbImg = lb.querySelector('.lb-img');
      const close = () => lb.classList.add('hidden');
      lb.querySelector('.lb-backdrop').addEventListener('click', close);
      lb.querySelector('.lb-close').addEventListener('click', close);
      document.addEventListener('click', function(e){
        const a = e.target.closest('[data-lightbox-src]');
        if(!a) return;
        e.preventDefault();
        lbImg.src = a.getAttribute('data-lightbox-src');
        lb.classList.remove('hidden');
      });
    </script>
  </body>
</html>
